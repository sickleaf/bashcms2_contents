---
articleTitle: 過払い金スロット（○○するシェル芸ちゃん_6日目）
Keywords: ○○するシェル芸ちゃん, bash, シェル芸
Copyright: (C) 2021 sickleaf
---

<br>

[○○するシェル芸ちゃん](../../?page=advent_shellgeichan)アドベントカレンダーの6日目です。
<br><br>

そろそろ予告ラインアップに手を付けていきます。今日の出題はテレビ・ラジオの強い視聴・聴取習慣があれば一度は触れたことのあるあのしつこいCM。

**日々鬱陶しいのでネタにさせてもらおうじゃないか。**

#### 問題

```
（１）「0120-X0-X0-X0」形式の電話番号を列挙し、その中で過払い金の相談が出来る番号（10-20-30 / 70-80-90 / 10-10-10）には以下の詳細情報を付与して下さい。
10-20-30：新宿事務所（阿部亮）
70-80-90：中央新宿事務所（田中秀平）
10-10-10：中央事務所（福間直也）
（２）「0120-X0-X0-X0」形式の電話番号をランダムで50件生成し、 10-20-30 / 70-80-90 / 10-10-10 が出たら「あなたも、お電話５分の過払い金無料診断ダイアルへ」を電話番号の後ろに表示して下さい。
```

ネタ元はこちら。大元のホームページやCMのYouTubeリンクがありますが、別にそれらを知らしめたい訳ではないので気になったら調べて下さい。


>カードキャッシングのご利用時に払いすぎた利息は過払い金。<br>
過払い金は新宿事務所で返金手続き出来ます。代表は法務大臣認定司法書士の＊＊＊＊＊。<br>
昨年依頼者＊＊＊＊人に１人あたり＊＊＊万円を超える過払い金があり、無事に返金手続きを終えました。<br>
過払い金の返金で借金がいくら減るのか、現金がいくら戻るのか、５分のお電話で無料診断。<br>
夜１２時まで土日も受け付け。過払い金の返金期限が近づいています。お早めにお電話を。<br>
０１２０－＊＊－＊＊－＊＊。０１２０－＊＊－＊＊－＊＊。０１２０－＊＊－＊＊－＊＊。<br>借金問題は新宿事務所。



### 回答方針

実質、「0120-X0-X0-X0」形式の電話番号の全量生成・ランダム生成が問題のポイントです。

生成には**ブレース展開**を使います。複数あるターミナルの中でもbashでしか使えないため、回答のベースとするには好ましくないのですが、記述に対して得られる結果が強力なのでつい…。

bash以外ならどうするか、別解が知りたいところ。Rubyのワンライナーとかあるかもしれない。

ブレース展開とは文字列生成を行うための表現方法で、コンマ区切りなどで記載した中括弧の中身をシェルが解釈して文字列の組み合わせを生成してくれます。

例えばこんな感じ。見た目は因数分解に似ている。
```
$ echo a{1,2,3}z
a1z a2z a3z
$ echo a{1..5}z
a1z a2z a3z a4z a5z
$ echo 1{a..z}0
1a0 1b0 1c0 1d0 1e0 1f0 1g0 1h0 1i0 1j0 1k0 1l0 1m0 1n0 1o0 1p0 1q0 1r0 1s0 1t0 1u0 1v0 1w0 1x0 1y0 1z0
```

`{1,2,3}`は`1 2 3`に、`{1..5}`は`1 2 3 4 5`、`{a..z}`は`a b c....z`になります。

繰り返しますが、**bashでしか使えません。** ブレース展開のmanは[こちら](https://linuxjm.osdn.jp/html/GNU_bash/man1/bash.1.html#lbAZ)。

man見ても使えるかどうかは微妙で、実用例を眺めては手を動かし、気になったらmanを読んでまた手を動かし…というループを繰り返すうちに身につくのかなと思います。


#### 「0120-X0-X0-X0」形式の全量生成

作成するのは0120-10-10-10から0120-90-90-90。`{1..9}`を作れば良い。

作った結果半角スペース区切り横に並ぶので、半角スペースを改行に変えれば全パターンの組み合わせの並び替え一覧が得られます。

```
$ echo 0120-{1..9}0-{1..9}0-{1..9}0 | tr " " "\n"
0120-10-10-10
0120-10-10-20
0120-10-10-30
0120-10-10-40
（中略）
0120-90-90-60
0120-90-90-70
0120-90-90-80
0120-90-90-90
```

#### 「0120-X0-X0-X0」形式のランダム生成

ランダム生成と言えば`shuf`。読んで字の如く。shufの[オプション](https://linuxjm.osdn.jp/info/GNU_coreutils/coreutils-ja_43.html)を多用していきます。

1から6の数字のうちどれかランダムで表示する時はこんな感じ。

```
$ seq 6 | shuf -n1
4
```

「[サイコロ転がしたら、出た目が、4](https://youtu.be/2cI5ntIf57A?t=215)」の様子。
もっと出す場合は-nの後の数字を増やせば良い。

あとは`seq 6`の代わりにフリーダイヤル出力のブレース展開を指定すればOK。

コマンドラインの出力は`-e`で指定可能。サンプルはこんな感じ。

```
$ shuf -n 10 -e 0120-{1..9}0-{1..9}0-{1..9}0
0120-60-40-70
0120-60-50-80
0120-40-50-60
0120-90-60-70
0120-10-50-50
0120-50-40-40
0120-50-60-70
0120-30-80-40
0120-30-40-10
0120-10-50-90
```


### 回答例

フリーダイヤルの生成が出来れば、後は条件に合うものについてsedで情報の出力をすればOK。


#### （１）回答例

`echo 0120-{1..9}0-{1..9}0-{1..9}0 | tr " " "\n" | sed -E "/10-20-30/s;$; 新宿事務所（阿部亮）;g; /70-80-90/s;$; 中央新宿事務所（田中秀平）;g; /10-10-10/s;$; 中央事務所（福間直也）;g"`

```
$ echo 0120-{1..9}0-{1..9}0-{1..9}0 | tr " " "\n" | sed -E "/10-20-30/s;$; 新宿事務所（阿部亮）;g; /70-80-90/s;$; 中央新宿事務所（田中秀平）;g; /10-10-10/s;$; 中央事務所（福間直也）;g"| tail
0120-90-80-90
0120-90-90-10
0120-90-90-20
0120-90-90-30
0120-90-90-40
0120-90-90-50
0120-90-90-60
0120-90-90-70
0120-90-90-80
0120-90-90-90
```

せっかくsedで書いても出力されない行が多すぎるので、事務所と表示しているところをgrepして本当に出ているか確認してみましょう。
```
$ echo 0120-{1..9}0-{1..9}0-{1..9}0 | tr " " "\n" | sed -E "/10-20-30/s;$; 新宿事務所（阿部亮）;g; /70-80-90/s;$; 中央新宿事務所（田中秀平）;g; /10-10-10/s;$; 中央事務所（福間直也）;g" | grep 事務所
0120-10-10-10 中央事務所（福間直也）
0120-10-20-30 新宿事務所（阿部亮）
0120-70-80-90 中央新宿事務所（田中秀平）
```

#### （２）回答例

`shuf -n50 -e 0120-{1..9}0-{1..9}0-{1..9}0 | sed -E "/(10-20-30|70-80-90|10-10-10)/s;$;  あなたも、お電話５分の過払い金無料診断ダイアルへ;g"`

```
$ shuf -n50 -e 0120-{1..9}0-{1..9}0-{1..9}0 | sed -E "/(10-20-30|70-80-90|10-10-10)/s;$;  あなたも、お電話５分の過払い金無料診断ダイアルへ;g"
0120-50-90-20
0120-40-70-80
0120-80-80-30
0120-40-80-90
0120-80-30-40
0120-60-60-60
0120-30-40-90
0120-30-10-10
0120-10-90-90
0120-90-30-80
0120-10-20-20
0120-50-40-30
0120-30-80-80
0120-20-10-40
0120-40-70-60
0120-50-60-80
0120-70-30-90
0120-10-60-80
0120-90-90-80
0120-50-20-60
0120-40-60-20
0120-10-20-30  あなたも、お電話５分の過払い金無料診断ダイアルへ
0120-90-10-90
0120-20-50-50
0120-10-70-90
0120-50-90-30
0120-20-50-30
0120-10-40-90
0120-70-70-50
0120-90-10-10
0120-40-30-40
0120-80-10-90
0120-80-40-10
0120-30-70-80
0120-50-60-30
0120-80-20-10
0120-70-90-90
0120-80-70-10
0120-90-70-60
0120-80-90-40
0120-30-10-80
0120-70-30-10
0120-40-90-40
0120-10-30-70
0120-40-60-80
0120-20-60-90
0120-20-20-50
0120-50-30-20
0120-90-40-30
0120-40-80-40
```

シェル芸botに投げた結果がこちら。残念ながら当たらず。

<blockquote class="twitter-tweet"><p lang="und" dir="ltr">0120-80-40-90<br>0120-80-80-50<br>0120-40-70-10<br>0120-80-40-30<br>0120-30-60-10<br>0120-30-70-60<br>0120-60-80-20<br>0120-30-50-10<br>0120-30-90-70<br>0120-80-50-90<br>0120-80-80-70<br>0120-60-70-70<br>0120-10-10-80<br>0120-90-70-10<br>0120-70-70-80 <a href="https://t.co/hCfAajWRM1">https://t.co/hCfAajWRM1</a></p>&mdash; シェル芸bot (@minyoruminyon) <a href="https://twitter.com/minyoruminyon/status/1464993288084422656?ref_src=twsrc%5Etfw">November 28, 2021</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>



問題終わってから書くのもなんだけど、最近は新宿事務所より杉山事務所（316571）とかホームワン（316279）とかみどり法務事務所（506070）とか亜種が増えてきてもう何が何やら。まあ代表して最初にヘイトを溜めた新宿事務所系を使ってみました。


### シェル芸ブロック

本日はシェル芸ブロックがあります。まる芸ちゃん界隈の皆さんも是非ご覧下さい。

今回の問題は、シェル芸勉強会で出題された金正日スロット問題に影響を受けたものです。

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">Q5<br>次の出力から始めて、ランダムに3文字を組み合わせて1つ出力するワンライナーを考えてください。毎回出力が違うようにしてください。また、同じ文字がちゃんと2回以上選ばれるようにしてください。<br><br>$ echo 正日金成恩男</p>&mdash; 上田 隆一 (@ryuichiueda) <a href="https://twitter.com/ryuichiueda/status/1096644701124386816?ref_src=twsrc%5Etfw">February 16, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">＿人人人人人人人人人人人人＿<br>＞　総書記スロット ver.2　＜<br>￣Y^Y^Y^Y^Y^Y^Y^Y^Y^Y^Y^Y^￣<br> <a href="https://t.co/ccmhhLtg9z">https://t.co/ccmhhLtg9z</a> <a href="https://t.co/dYDlCMIs0S">pic.twitter.com/dYDlCMIs0S</a></p>&mdash; シェル芸bot (@minyoruminyon) <a href="https://twitter.com/minyoruminyon/status/1096971053069266944?ref_src=twsrc%5Etfw">February 17, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


[第40回光明⭐️節シェル芸勉強会](https://b.ueda.tech/?post=20190216_shellgei_40#q5)に触れた時の衝撃はなかなかなものでした。

参加して全く手も足も出なかったけど終始楽しかった。

### ○○する芸能ちゃんブロック

問題との関連はありません。ただただオススメ。


<div class="youtube">
<iframe width="560" height="315" src="https://www.youtube.com/embed/uVNgpjGAnIk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>


<style>
.youtube {
  position: relative;
  width: 100%;
  padding-top: 56.25%;
}
.youtube iframe {
  position: absolute;
  top: 0;
  right: 0;
  width: 100% !important;
  height: 100% !important;
}
</style>



<!--


## 書籍近影

### 別ページへのリンク
[memolink](../../?page=memolink)

### 複数行引用
<blockquote></blockquote>

#### CSS埋め込み

<style>
.col-md-9 > iframe {
	width:100% !important;
	height:500px !important;}
</style>

<font style="color:#FFFFFF;"></font>

#### JS埋め込み

<script type="text/javascript">
</script>

-->
